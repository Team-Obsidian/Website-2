<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Music</title>
  <link href="../index.css" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="../img/icon/Favicon.png">


  <ul class="navbar white reno" id="navbar">
    <li><a href="../index.html">Home</a></li>
    <li><a href="games.html">Games</a></li>
    <li><a href="music.html">Music</a></li>
    <li><a href="#">Misc</a></li>
  </ul>

<p>welcome to the music testing page</p>
<p>this place will get updated soon but here, you'll be able to listen to every song that I've uploaded on this website[40 songs]</p>
<p>you could call it this website's UST(Unoriginal Sountrack)</p>
  <script language="javascript" src="howler.js"></script>
  <script>
    var list = [
    '../sound/3dworldmysteryhouse.mp3',
    '../sound/bodymeasurement.mp3',
    '../sound/dogcheck.mp3',
    '../sound/dreamyard.mp3',
    '../sound/dsishop.mp3',
    '../sound/eshop3ds.mp3',
    '../sound/forestfrenzy.mp3',
    '../sound/galaxyfileselect.mp3',
    '../sound/gen5gate.mp3',
    '../sound/gen6gate.mp3',
    '../sound/goodforhealth.mp3',
    '../sound/hipshop.mp3',
    '../sound/kirbyapartment.mp3',
    '../sound/lastresort.mp3',
    '../sound/letsgettogethernow.mp3',
    '../sound/librarystroll.mp3',
    '../sound/miieditorwiiu.mp3',
    '../sound/miimaker3ds.mp3',
    '../sound/miitopiaprofile.mp3',
    '../sound/mycastletown.mp3',
    '../sound/mywiifit.mp3',
    '../sound/nl7am.mp3',
    '../sound/nl11am.mp3',
    '../sound/pokemoncenter.mp3',
    '../sound/recyclingisaconcept.mp3',
    '../sound/rustboro.mp3',
    '../sound/screenselectwiisports.mp3',
    '../sound/shop.mp3',
    '../sound/splatoon1shop.mp3',
    '../sound/splatoon1tutorial.mp3',
    '../sound/systemsettings3ds.mp3',
    '../sound/tosleep.mp3',
    '../sound/trees.mp3',
    '../sound/uwasotemperate.mp3',
    '../sound/wavedash.mp3',
    '../sound/welcometothecity.mp3',
    '../sound/welcometothecityalt.mp3',
    '../sound/welcometotheworldofpokemon.mp3',
    '../sound/whitespace.mp3',
    '../sound/wiishop.mp3',
    '../sound/wiisportstutorial.mp3',]
var i=0;

this.howl = new Howl({
    src: [list[i]],
    preload: true,
    autoplay: isPlaying,
    onend: function () {
      while (true) {
        if ((i + 1) >= list.length) {
            i=0;
        } else {
            i++;
        }
        this.howl.play();
      }
    }
});
/*
function autoplay(i, list, isPlaying) {
    this.howl = new Howl({
        src: [list[i]],
        preload: true,
        autoplay: isPlaying,
        onend: function () {
            if ((i + 1) == list.length) {
                autoplay(0, list)
            } else {
                autoplay(i + 1, list)
            }
        }
    })
} */

let savemusic = document.getElementById("navbar");

navbar.addEventListener("mouseenter", function(event) {

  if (this.howl==null) return;
  
  sessionStorage.setItem("tracknum", i);
  sessionStorage.setItem("tracktime", this.howl.seek());
  sessionStorage.setItem("playing", this.howl.playing());
},);

if (sessionStorage.getItem("playing")=="undefined") {
  var isPlaying = "false"
} else { var isPlaying = sessionStorage.getItem("playing"); }


function skip() {

    const sound = this.howl.pause()._sounds[0];
    const currentSeek = sound._seek;
    const forwardTo = this.howl.duration()-0.01;
    console.log('skipping to ' + forwardTo + ' from ' + currentSeek);
    this.howl.seek(forwardTo);
    this.howl.play();
    }

function shuffle() {
  this.howl.pause();
  autoplay(randomnum(), list);
  this.howl.play();
}

function randomnum() {
  console.log(list.length);
  return Math.floor(Math.random() * list.length);
}


function audiotoggle() {
  if (this.howl.playing()==true) {
    this.howl.pause()
  } else {
    this.howl.play()
  }
}






function set1 () {
  localStorage.test = 'left';
}

function set2 () {
  localStorage.test = 'right';
}

function defaulty2 () {
  localStorage.test = 'default';
}

function displaytest () {
  console.log(localStorage.test)
}

defaulty2();
</script>

<div class="musicicon">
  <img src="../img/icon/forestbunny.gif" onclick="shuffle()"><p>Skip to a random song</p>
  <img src="../img/icon/dustbunny.gif" onclick="skip()"><p>Next Song</p>
  <img src="../img/icon/cupcakebunny.gif" onclick="audiotoggle()"><p>Turn on and off the music</p>
</div>

<button type="button" onclick="set1()">Set Left</button>
<button type="button" onclick="set2()">Set Right</button>
<button type="button" onclick="displaytest()">Check Console</button>
<button type="button" onclick>
<!--
</head>
      <ul class="navbar">
        <li><a class="white navbar reno" href="../index.html">Home</a></li>
        <li><a class="white navbar reno" href="games.html">Games</a></li>
        <li><a class="white reno" href="#">Music</a></li>
        <li><a class="white reno" href="#">Misc</a></li>
      </ul>



<body>
  <div class="main">
    <p class="white"><br><br><br>main text I think</p>

  </div>


  <div class="secondary">


  </div>


</body>
-->
<!--
  </div>
    <audio id="myAudio" src="sound/letsgettogethernow.mp3" autoplay preload="auto" loop ></audio>
    <img id="musictoggle" src="img/icon/bugbunny.webp" onClick="togglePlay()">
    <script>
      var myAudio = document.getElementById("myAudio");

      function togglePlay() {
        return myAudio.paused ? myAudio.play() : myAudio.pause();
      };

    </script>

  </div>
-->

</html>
