<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attempt 2!</title>
  <link href="test.css" rel="stylesheet">
  <link rel="icon" type="image/x-icon" href="img/icon/Favicon.png">
  <script src="page/howler.js"></script>
</head>
<script>
var portraitlist = [
  'face/herosprites/neutralH.gif',
  'face/herosprites/talkH.png',
  'face/nikosprites/Niko_smile_arm.webp',
  'face/nikosprites/Niko_speak.webp',
  'face/herosprites/happyH.gif',
  'face/herosprites/neutralH.gif',
  'face/herosprites/talkH.png',
  'face/herosprites/injuredH.gif',
  'face/herosprites/injuredH.gif',
  'face/herosprites/talkH.png',
  'face/nikosprites/Niko.webp',
  'face/herosprites/nervousH.png',
  'face/nikosprites/Niko5.webp',
  'face/nikosprites/Niko6.webp',
  'face/nikosprites/Niko_wtf2.webp',
  'face/herosprites/nervousH.png',
  'face/herosprites/panickedH.png',
  'face/herosprites/happyH.gif',
  'face/nikosprites/Niko_smile_arm.webp'
];

var dialoguelist = [
  "Welcome to [WEBSITE]. We've got [VIDEO GAME LINKS], [GUIDES], and [MUSIC] in addition to [MORE].",
  "Originally meant to be a small summer project, this brainchild of a website was created by me, Aster...",
  "...and me, Ren!",
  "I'm the website's designer and beta tester! Although I don't get as many opportunities to help out, I'm working hard too!",
  "Likewise, I am the website's programmer and I'm very excited to present this to you!",
  "I was the first to work on this website of course but the line of credit goes back further to another friend whose website this is essentially a spiritual successor to.",
  "But...",
  "...",
  "...",
  "...I'm probably the lead person only because I have infinite free time while Ren doesn't. It works out since coding takes too long but...",
  "...",
  "...",
  "...",
  "...",
  "Uh...",
  "Yep...",
  "Oh yeah!",
  "I hope this dialogue box test didn't keep you here for too long. Have fun with the games, stay hydrated, and continue forth on your quest to sanity.",
  "Have fun!",

];

var order = 0;
var a = 0;
var txt = dialoguelist[order];
var portrait = portraitlist[order];
var speed = 25;



function typeWriter() {
  if (a < txt.length) {
    textsound.play();
    document.getElementById("dialoguecontent").innerHTML += txt.charAt(a);
    a++;
    setTimeout(typeWriter, speed);
    document.removeEventListener('keydown', advancedialogue);
  } else {
    if (order + 1 <= dialoguelist.length) {
    order += 1;
    txt = dialoguelist[order];
    portrait_ = portrait;
    portrait = portraitlist[order];
    document.addEventListener('keydown', advancedialogue);
  }
}
}

function advancedialogue(txt_, a_, order_, portrait_) {
    if (order + 1 > dialoguelist.length) {
      dialoguefinish();
      return;
    }
    txt_ = txt;
    a_ = a;
    order_ = order;
    a = 0;
    document.getElementById("dialoguecontent").innerHTML = "";
    document.getElementById("portrait").src = portrait;

    typeWriter();
}

function dialoguestart (order_, text_, a_, portrait_) {
  order_ = order;
  order = 0;
  txt_ = txt;
  txt = dialoguelist[order];
  a_ = a;
  a = 0;
  portrait_ = portrait;
  portrait = portraitlist[order];
  document.getElementById("dialoguecontent").innerHTML = "";
  document.getElementById("portrait").src = portrait;
  document.getElementById("staticlayer").style.opacity = "0.25";
  document.getElementById("staticlayer").style.pointerEvents = "all";
  document.getElementById("textbox").style.display = "block";
  advancedialogue();
  document.addEventListener('keydown', advancedialogue);
  //  document.getElementById("textbox").classList.add("animate_content");
};

function dialoguefinish () {


  setTimeout(function() {
    document.getElementById("staticlayer").style.opacity = "0";
    document.getElementById("staticlayer").style.pointerEvents = "none";
      document.getElementById("textbox").style.display = "none";
  }, 1000);
  document.getElementById("textbox").classList.remove("animate_content");
  document.removeEventListener('keydown', advancedialogue);

};


var menuopen = new Howl({
  src: ["sfx/P4 Menu Open.wav"]
});

var menuexit = new Howl({
  src: ["sfx/P4 Menu Exit.wav"]
});

var menuselect = new Howl({
  src: ["sfx/P4 Select.wav"]
});

var menuhover = new Howl({
  src: ["sfx/P4 Hover.wav"]
});

var textsound = new Howl({
  src: ["sfx/generic1.wav"]
});

</script>

<body>
  <div id="restofpage">
<img src="img/yumenikkisnow.gif" onclick="dialoguestart()">

  <div id="staticlayer" onclick="dialoguefinish()"></div>

  <div id="textbox" class="textboximg">
    <div class="dialogue">
      <p id="dialoguecontent" class="white apple">Press any key to start the dialogue!<br>Click the page to move onto the rest of the website.<br>Wait until dialogue is done or else it glitches.</p>
    </div>
    <img class="portrait" id="portrait" src="face/nikosprites/Niko_smile_arm.webp">
  </div>

  </div>
</body>

</html>
